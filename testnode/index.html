<!doctype html>
<!-- [ Power By Dannegm (c) 2012 - http://dannegm.com ] -->
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Teest Node</title>
	<link rel="stylesheet/less" href="estilo.less" />
	<script src="http://adsearch.mx:2142/socket.io/socket.io.js"></script>
	<script src="js/jquery.min.js"></script>
	<script src="less.min.js"></script>
	<script>
		var socket = io.connect('http://adsearch.mx:2142');

		socket.on('enviando', function(e){
				
				var user = e.usuario;
				$('#logs').append('<p><strong>' + user.nombre + ':</strong> ' + user.texto + '</p>');
				$('#online').text(e.usuarios.lenght);
		});
		
		function enviar (e) {
			var user = {
				nombre: $('#nombre').val(),
				texto: $('#mensaje').val()
			}
			$('#mensaje').val('');
			socket.emit('enviar', user);
			console.log('Enviado: ' + contnido);
		}
		function run () {
			$('#formulario').submit(function(e){
				e.preventDefault();
				enviar();
			});
			$('#mensaje').keyup(function(e){
				var enter = e.keyCode;
				if (enter == '13'){
					$('#formulario').trigger('submit');
				}
			});
		}
		$(document).ready(run);
	</script>
</head>
<body>
	<h1>Test node</h1>
	<div>
		<section id="logs">
		</section>
		<aside id="online">
		</aside>
		<form id="formulario">
			<input id="nombre" placeholder="Escribe un nombre">
			<textarea id="mensaje" class="grande"></textarea>
		</form>
	</div>
</body>
</html>